<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Fiszki PL-ENG z systemem powt贸rek</title>
  <link rel="manifest" href="manifest.json">
  <meta name="theme-color" content="#ffffff">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-title" content="Fiszki">
  <meta name="apple-mobile-web-app-status-bar-style" content="default">
  <link rel="apple-touch-icon" href="icon-192.png">
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f4f4f4;
      padding: 20px;
      max-width: 700px;
      margin: auto;
    }
    .card {
      background: white;
      padding: 20px;
      border-radius: 12px;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
      text-align: center;
    }
    .word {
      font-size: 24px;
      margin-bottom: 10px;
    }
    .example, .translation {
      font-size: 16px;
      color: #555;
      margin-bottom: 10px;
    }
    .image {
      max-width: 100%;
      height: 150px;
      object-fit: contain;
      margin-bottom: 20px;
    }
    button {
      padding: 10px 20px;
      margin: 5px;
      font-size: 16px;
      cursor: pointer;
    }
    .level-indicator {
      margin-top: 10px;
      font-size: 14px;
      color: gray;
    }
  </style>
</head>
<body>
  <div class="card">
    <div class="word" id="word">Kliknij "Start" aby rozpocz</div>
    <div class="example" id="example"></div>
    <div class="translation" id="translation"></div>
    <img class="image" id="image" src="" alt="">
    <div class="level-indicator" id="level"></div>
    <button onclick="showWord('pl')">PL</button>
    <button onclick="showWord('eng')">ENG</button>
    <button onclick="showTranslation()">Tumaczenie zdania</button>
    <button onclick="playAudio()"></button>
    <button onclick="nextWord()">Nastpne</button>
    <br>
    <button onclick="markKnown()">Znam to</button>
    <button onclick="markUnknown()">Nie znam</button>
  </div>

  <script>
    const words = [
      ["efektywno energetyczna", "energy efficiency", "https://cdn-icons-png.flaticon.com/512/1647/1647545.png", "Energy efficiency helps reduce energy bills and emissions.", "Efektywno energetyczna pomaga zmniejszy rachunki za energi i emisje."],
      ["koszty mieszkaniowe", "housing costs", "https://cdn-icons-png.flaticon.com/512/3135/3135715.png", "Many people are struggling with high housing costs.", "Wiele os贸b zmaga si z wysokimi kosztami mieszkaniowymi."],
      ["dostawcy usug", "service providers", "https://cdn-icons-png.flaticon.com/512/5997/5997762.png", "The platform connects users with trusted service providers.", "Platforma czy u偶ytkownik贸w z zaufanymi dostawcami usug."],
      ["modernizacja energetyczna", "energy retrofit", "https://cdn-icons-png.flaticon.com/512/2972/2972435.png", "An energy retrofit improves your home's insulation and heating.", "Modernizacja energetyczna poprawia izolacj i ogrzewanie domu."],
      ["klasa energetyczna", "energy class (EPC)", "https://cdn-icons-png.flaticon.com/512/1146/1146869.png", "The house has an energy class B on the EPC scale.", "Dom ma klas energetyczn B w skali EPC."],
      ["zu偶ycie energii", "energy consumption", "https://cdn-icons-png.flaticon.com/512/1046/1046857.png", "You can lower energy consumption by using LED lights.", "Mo偶esz zmniejszy zu偶ycie energii, u偶ywajc 偶ar贸wek LED."],
      ["pr贸g rentownoci", "break-even point", "https://cdn-icons-png.flaticon.com/512/2910/2910791.png", "We reached the break-even point after two years of operation.", "Osignlimy pr贸g rentownoci po dw贸ch latach dziaalnoci."],
      ["lad wglowy", "carbon footprint", "https://cdn-icons-png.flaticon.com/512/2907/2907253.png", "Flying less can help reduce your carbon footprint.", "Mniej latania mo偶e pom贸c zmniejszy tw贸j lad wglowy."],
      ["symulacja", "simulation", "https://cdn-icons-png.flaticon.com/512/3489/3489462.png", "This tool provides a simulation of energy savings.", "To narzdzie oferuje symulacj oszczdnoci energii."],
      ["rozwizanie white-label", "white-label solution", "https://cdn-icons-png.flaticon.com/512/2921/2921822.png", "We offer a white-label solution for banks.", "Oferujemy rozwizanie typu white-label dla bank贸w."]
    ];

    let current = -1;
    let learningState = new Array(words.length).fill(0);

    function nextWord() {
      let available = words.map((_, i) => i).filter(i => learningState[i] < 2);
      if (available.length === 0) {
        document.getElementById("word").innerText = "Wszystkie sowa opanowane!";
        document.getElementById("image").src = "";
        document.getElementById("example").innerText = "";
        document.getElementById("translation").innerText = "";
        document.getElementById("level").innerText = "Gratulacje!";
        return;
      }
      current = available[Math.floor(Math.random() * available.length)];
      document.getElementById("word").innerText = "?";
      document.getElementById("image").src = words[current][2];
      document.getElementById("example").innerText = "";
      document.getElementById("translation").innerText = "";
      document.getElementById("level").innerText = `Poziom zapamitania: ${learningState[current] === 0 ? "Nowe" : "Poznane"}`;
    }

    function showWord(lang) {
      if (current >= 0) {
        document.getElementById("word").innerText = lang === 'pl' ? words[current][0] : words[current][1];
        document.getElementById("example").innerText = lang === 'eng' ? words[current][3] : "";
        document.getElementById("translation").innerText = "";
      }
    }

    function showTranslation() {
      if (current >= 0) {
        document.getElementById("translation").innerText = words[current][4];
      }
    }

    function markKnown() {
      if (current >= 0 && learningState[current] < 2) {
        learningState[current]++;
        nextWord();
      }
    }

    function markUnknown() {
      if (current >= 0) {
        learningState[current] = 0;
        nextWord();
      }
    }

    function playAudio() {
      if (current >= 0) {
        const utterance = new SpeechSynthesisUtterance(words[current][1]);
        utterance.lang = 'en-US';
        speechSynthesis.speak(utterance);
      }
    }

    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('service-worker.js')
          .then(reg => console.log('SW zarejestrowany:', reg))
          .catch(err => console.error('Bd SW:', err));
      });
    }
  </script>
</body>
</html>